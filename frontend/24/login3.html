<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>检测员登录</title>
  <link rel="stylesheet" href="css/login3.css">
  <script type="text/javascript" src="js/jquery.min.js"></script>
  <script src="./lib/layui/layui.js" charset="utf-8"></script>
</head>
<body class="login-bg">
    <div class="biaoti">
        军都山公园检测员系统
    </div>
    <div class="login">
        <div class="message">检测员登陆</div>
        <div id="darkbannerwrap"></div>   
        <form method="post" class="layui-form" >
            <input name="inspectorid" placeholder="用户名"  type="text" lay-verify="required" class="layui-input" >
            <hr class="hr15">
            <input name="inspectorpw" lay-verify="required" placeholder="请输入8位密码"  type="password" class="layui-input">
            <hr class="hr15">
            <input value="登录" lay-submit lay-filter="login" style="width:100%;" type="button" onclick="savevisitor(this.form)">
            <hr class="hr20" >
        </form>
    </div>
    <script>
function savevisitor(frm){

var jsonObject=new Object();
jsonObject.inspectorid=frm.inspectorid.value;
jsonObject.inspectorpw=frm.inspectorpw.value;


var stringData=JSON.stringify(jsonObject);
var xhr = new XMLHttpRequest();
xhr.withCredentials = true;

xhr.addEventListener("readystatechange", function() {
    if(this.readyState === 4) {
           console.log(this.responseText);
           if (this.responseText =="defeat"){
                alert("账户名或密码错误！");
                location.reload();
            }
            else {
                alert("login success!");
                location.href = "./index2.html";
        }
    }
});

xhr.open("POST", "http://192.168.50.65:8000/inspectorlogin/");
xhr.send(stringData);

}
    </script>

    
    <!-- 底部结束 -->
    
</body>
</html>